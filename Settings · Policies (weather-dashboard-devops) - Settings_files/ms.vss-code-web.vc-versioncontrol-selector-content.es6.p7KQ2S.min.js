"use strict";define("VC/VersionControlSelector",["require","exports","react","VSSUI/Dropdown","VSSUI/Utilities/DropdownSelection","VSSUI/Icon","VSSUI/FormItem","VSSUI/Link","VSS/Core/Util/Object","VSS/Platform/Layout"],(function(e,o,t,n,r,s,i,l,a,c){var p,d;p=o[d="Resources"]={},o[d].VersionControlSelectorLabel="Version control",o[d].VersionControlHelpTooltip="Compare and choose the right version control for your project.",o[d].VersionControlLearnMoreAriaLabel="Learn more about selecting the right version control.",o[d].VersionControlLearnMoreLink="https://go.microsoft.com/fwlink/?LinkID=825687",o[d].VersionControlDropdownAriaLabel="Select a version control type for the default repository. You can always add more repositories later.",function(e){o.VersionControlSelector={};class d extends c.VssComponent{constructor(e,o){super(e,o),this._versionControlSelection=new r.DropdownSelection,this._onChanged=(e,o)=>{const t=o.id.toString();this.props.onSelectedOptionChanged(d.VERSION_CONTROL_SELECTOR_KEY,t),this.setState({selectedKey:t})},this._dropdownId=this.props.id||(0,a.getId)("drop-down"),this._helpTooltipId=(0,a.getId)("help-tooltip"),this._versionControlSelection.select(0),this.state={versionControlTypes:[],selectedKey:""}}componentDidMount(){super.componentDidMount(),this._loadVersionControlTypes()}render(){return t.createElement("div",{className:this.props.className},this.state.versionControlTypes.length>0&&t.createElement(t.Fragment,null,t.createElement("div",{className:"flex flex-center"},t.createElement(i.FormItem,{label:p.VersionControlSelectorLabel,className:"vcs-dropdown-label"},t.createElement(l.Link,{className:"vcs-help-icon-container",ariaLabel:p.VersionControlLearnMoreAriaLabel,ariaDescribedBy:this._helpTooltipId,href:p.VersionControlLearnMoreLink,target:"_blank",rel:"noopener noreferrer",disabled:this.props.disabled,tooltipProps:{anchorOffset:{horizontal:0,vertical:-10},anchorOrigin:{horizontal:"center",vertical:"start"},id:this._helpTooltipId,showOnFocus:!0,text:p.VersionControlHelpTooltip,tooltipOrigin:{horizontal:"center",vertical:"end"}}},t.createElement(s.Icon,{iconName:"Unknown"})))),t.createElement(n.Dropdown,{className:"vc-selector-dropdown",ariaLabel:p.VersionControlDropdownAriaLabel,disabled:this.props.disabled,selection:this._versionControlSelection,onSelect:this._onChanged,items:this.state.versionControlTypes,calloutContentClassName:"vc-selector-callout"})))}_loadVersionControlTypes(){this.trackPromise(this.context.pageContext.getService("IVssContributionService").getDataAsync(d.PROVIDER_ID)).promise.then((e=>{if(e){const o=[];let t=null;this.props.initialOptions&&(t=this.props.initialOptions[d.VERSION_CONTROL_SELECTOR_KEY]);let n="";e.map(((e,r)=>{e.name&&(o.push({id:e.id,text:e.name}),(!t&&e.isDefault||e.id===t)&&(n=e.id))})),!n&&o.length>0&&(n=o[0].id.toString()),this.setState({versionControlTypes:o,selectedKey:n}),t!==n&&this.props.onSelectedOptionChanged(d.VERSION_CONTROL_SELECTOR_KEY,n)}}),(()=>{}))}}d.PROVIDER_ID="ms.vss-code-web.vc-versioncontrol-types-provider",d.VERSION_CONTROL_SELECTOR_KEY="versionControlSelector",c.Components.add("VC.VersionControlSelector",d)}()}),["Resources","VersionControlSelector"]),document.dispatchEvent(new CustomEvent("scriptLoaded",{cancelable:!1,detail:{id:"ms.vss-code-web.vc-versioncontrol-selector-content"}}));